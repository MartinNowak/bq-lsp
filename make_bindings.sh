#!/usr/bin/env bash

set -ueEo pipefail

rm -rf bindings && mkdir bindings

~/binder/bin/binder -v --annotate-includes --trace --root-module zetasql --single-file --config binder.cfg --include-pybind11-stl --prefix=bindings zetasql.hpp -- --std=c++17 -Ibazel-bq-lsp/external/com_google_zetasql/ -I../zetasql/bazel-out/k8-fastbuild/bin/ -I../zetasql/bazel-out/k8-fastbuild/bin/zetasql/resolved_ast/_virtual_includes/resolved_node_kind_proto/ -I../zetasql/bazel-out/k8-fastbuild/bin/zetasql/resolved_ast/_virtual_includes/resolved_ast_proto/ -Ibazel-bq-lsp/external/com_google_absl/ -Ibazel-bq-lsp/external/com_google_protobuf/src/ -Ibazel-bq-lsp/external/com_google_googletest/googletest/include/ -cc1 -triple x86_64-redhat-linux-gnu -emit-obj -mrelax-all --mrelax-relocations -disable-free -clear-ast-before-backend -disable-llvm-verifier -discard-value-names -main-file-name zetasql.cc -mrelocation-model static -mframe-pointer=all -fmath-errno -ffp-contract=on -fno-rounding-math -mconstructor-aliases -funwind-tables=2 -target-cpu x86-64 -tune-cpu generic -mllvm -treat-scalable-fixed-error-as-warning -debugger-tuning=gdb -v -fcoverage-compilation-dir=/home/dawg/Build/bq-lsp -resource-dir /usr/lib64/clang/15.0.6 -I bazel-bq-lsp/external/com_google_zetasql/ -I bazel-bq-lsp/external/com_google_absl/ -internal-isystem /usr/bin/../lib/gcc/x86_64-redhat-linux/12/../../../../include/c++/12 -internal-isystem /usr/bin/../lib/gcc/x86_64-redhat-linux/12/../../../../include/c++/12/x86_64-redhat-linux -internal-isystem /usr/bin/../lib/gcc/x86_64-redhat-linux/12/../../../../include/c++/12/backward -internal-isystem /usr/lib64/clang/15.0.6/include -internal-isystem /usr/local/include -internal-isystem /usr/bin/../lib/gcc/x86_64-redhat-linux/12/../../../../x86_64-redhat-linux/include -internal-externc-isystem /include -internal-externc-isystem /usr/include -fdeprecated-macro -fdebug-compilation-dir=/home/dawg/Build/bq-lsp -ferror-limit 19 -fgnuc-version=4.2.1 -fcxx-exceptions -fexceptions -fcolor-diagnostics -faddrsig -D__GCC_HAVE_DWARF2_CFI_ASM=1 -x c++
